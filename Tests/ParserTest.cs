using System;
using System.Linq;
using Xunit;
using YAMSE;
using YAMSE.DataLayer;

namespace Tests
{
    public class ParserTest
    {
        [Fact]
        public void RenameTest()
        {
            string newNameStr = "renamedAAA";
            var expectedBytesAfterRename = new byte[] { 0x27, 0x00, 0x00, 0x00, 0x23, 0xAE, 0x11, 0x00, 0x00, 0x00, 0x72, 0x65, 0x6E, 0x61, 0x6D, 0x65, 0x64, 0x41, 0x41, 0x41, 0x00, 0x22, 0xAE, 0x0A, 0x00, 0x00, 0x00, 0x01, 0x00, 0x00, 0x00, 0x24, 0xAE, 0x06, 0x00, 0x00, 0x00 };

            Dnc testDnc = new Dnc() { Name = "9balik2", dncKind = YAMSE.NodeType.Definition, dncType = DncType.GhostObject };
            testDnc.RawData = new byte[] { 0x24, 0x00, 0x00, 0x00, 0x23, 0xAE, 0x0E, 0x00, 0x00, 0x00, 0x39, 0x62, 0x61, 0x6C, 0x69, 0x6B, 0x32, 0x00, 0x22, 0xAE, 0x0A, 0x00, 0x00, 0x00, 0x01, 0x00, 0x00, 0x00, 0x24, 0xAE, 0x06, 0x00, 0x00, 0x00 };

            YAMSE.Scene2Parser.RenameDnc(testDnc, newNameStr);

            Assert.True(testDnc.RawData.SequenceEqual(expectedBytesAfterRename));
        }

        [Fact]
        public void EnemySaveTestNoScriptUpdate()
        {
            var rawData = new byte[]
    {
        0x03,
        0x02,
        0x00,
        0x00,
        0x23,
        0xae,
        0x0a,
        0x00,
        0x00,
        0x00,
        0x53,
        0x61,
        0x6d,
        0x00,
        0x22,
        0xae,
        0x0a,
        0x00,
        0x00,
        0x00,
        0x1b,
        0x00,
        0x00,
        0x00,
        0x24,
        0xae,
        0xe9,
        0x01,
        0x00,
        0x00,
        0x06,
        0x02,
        0x00,
        0x00,
        0x00,
        0x01,
        0x00,
        0x00,
        0x00,
        0x00,
        0x00,
        0x80,
        0x3f,
        0x00,
        0x00,
        0x16,
        0x44,
        0x00,
        0x00,
        0xa0,
        0x41,
        0x00,
        0x00,
        0xa0,
        0x41,
        0x00,
        0x00,
        0xa0,
        0x41,
        0x00,
        0x00,
        0xa0,
        0x41,
        0x00,
        0x00,
        0x80,
        0x3f,
        0x00,
        0x00,
        0x80,
        0x3f,
        0x00,
        0x00,
        0x80,
        0x3f,
        0x00,
        0x00,
        0x80,
        0x3f,
        0x00,
        0x00,
        0x80,
        0x3f,
        0x00,
        0x00,
        0x80,
        0x3f,
        0x00,
        0x00,
        0x80,
        0x3f,
        0xcb,
        0xcc,
        0x4c,
        0x3f,
        0x00,
        0x00,
        0xa0,
        0x42,
        0x00,
        0x00,
        0x00,
        0x3f,
        0x01,
        0x01,
        0x00,
        0x00,
        0x00,
        0x00,
        0x90,
        0x01,
        0x00,
        0x00,
        0x2f,
        0x2f,
        0x50,
        0x72,
        0x65,
        0x64,
        0x61,
        0x74,
        0x6f,
        0x52,
        0x20,
        0x4d,
        0x6f,
        0x44,
        0x2f,
        0x2f,
        0x0a,
        0x2f,
        0x2f,
        0x42,
        0x79,
        0x20,
        0x53,
        0x6f,
        0x6d,
        0x65,
        0x62,
        0x6f,
        0x64,
        0x59,
        0x2f,
        0x2f,
        0x0a,
        0x2f,
        0x2f,
        0x56,
        0x65,
        0x72,
        0x2e,
        0x32,
        0x2e,
        0x30,
        0x2f,
        0x2f,
        0x0a,
        0x64,
        0x69,
        0x6d,
        0x5f,
        0x66,
        0x6c,
        0x74,
        0x20,
        0x31,
        0x0a,
        0x64,
        0x69,
        0x6d,
        0x5f,
        0x61,
        0x63,
        0x74,
        0x20,
        0x33,
        0x0d,
        0x0a,
        0x64,
        0x69,
        0x6d,
        0x5f,
        0x66,
        0x72,
        0x6d,
        0x20,
        0x32,
        0x0d,
        0x0a,
        0x66,
        0x69,
        0x6e,
        0x64,
        0x61,
        0x63,
        0x74,
        0x6f,
        0x72,
        0x20,
        0x30,
        0x2c,
        0x20,
        0x22,
        0x54,
        0x6f,
        0x6d,
        0x6d,
        0x79,
        0x22,
        0x0a,
        0x66,
        0x69,
        0x6e,
        0x64,
        0x61,
        0x63,
        0x74,
        0x6f,
        0x72,
        0x20,
        0x31,
        0x2c,
        0x20,
        0x22,
        0x22,
        0x0d,
        0x0a,
        0x66,
        0x69,
        0x6e,
        0x64,
        0x61,
        0x63,
        0x74,
        0x6f,
        0x72,
        0x20,
        0x32,
        0x2c,
        0x20,
        0x22,
        0x50,
        0x2d,
        0x53,
        0x63,
        0x61,
        0x72,
        0x22,
        0x0a,
        0x66,
        0x69,
        0x6e,
        0x64,
        0x66,
        0x72,
        0x61,
        0x6d,
        0x65,
        0x20,
        0x30,
        0x2c,
        0x20,
        0x22,
        0x49,
        0x6e,
        0x74,
        0x72,
        0x6f,
        0x50,
        0x6f,
        0x69,
        0x6e,
        0x74,
        0x33,
        0x22,
        0x0d,
        0x0a,
        0x66,
        0x69,
        0x6e,
        0x64,
        0x66,
        0x72,
        0x61,
        0x6d,
        0x65,
        0x20,
        0x31,
        0x2c,
        0x20,
        0x22,
        0x41,
        0x63,
        0x74,
        0x3a,
        0x54,
        0x6f,
        0x6d,
        0x6d,
        0x79,
        0x22,
        0x0d,
        0x0a,
        0x0d,
        0x0a,
        0x65,
        0x6e,
        0x65,
        0x6d,
        0x79,
        0x5f,
        0x76,
        0x69,
        0x64,
        0x69,
        0x6d,
        0x20,
        0x30,
        0x0a,
        0x68,
        0x75,
        0x6d,
        0x61,
        0x6e,
        0x5f,
        0x61,
        0x64,
        0x64,
        0x77,
        0x65,
        0x61,
        0x70,
        0x6f,
        0x6e,
        0x20,
        0x31,
        0x2c,
        0x20,
        0x31,
        0x30,
        0x2c,
        0x20,
        0x35,
        0x30,
        0x2c,
        0x20,
        0x32,
        0x30,
        0x30,
        0x30,
        0x0a,
        0x63,
        0x61,
        0x72,
        0x5f,
        0x75,
        0x6e,
        0x62,
        0x72,
        0x65,
        0x61,
        0x6b,
        0x61,
        0x62,
        0x6c,
        0x65,
        0x20,
        0x32,
        0x2c,
        0x20,
        0x31,
        0x0d,
        0x0a,
        0x0a,
        0x6c,
        0x61,
        0x62,
        0x65,
        0x6c,
        0x20,
        0x31,
        0x0a,
        0x67,
        0x6f,
        0x74,
        0x6f,
        0x20,
        0x31,
        0x0a,
        0x0a,
        0x65,
        0x76,
        0x65,
        0x6e,
        0x74,
        0x20,
        0x33,
        0x35,
        0x30,
        0x0d,
        0x0a,
        0x65,
        0x6e,
        0x65,
        0x6d,
        0x79,
        0x5f,
        0x76,
        0x69,
        0x64,
        0x69,
        0x6d,
        0x20,
        0x31,
        0x0a,
        0x65,
        0x6e,
        0x65,
        0x6d,
        0x79,
        0x5f,
        0x61,
        0x63,
        0x74,
        0x69,
        0x6f,
        0x6e,
        0x5f,
        0x66,
        0x6f,
        0x6c,
        0x6c,
        0x6f,
        0x77,
        0x20,
        0x30,
        0x2c,
        0x20,
        0x32,
        0x2c,
        0x20,
        0x63,
        0x72,
        0x6f,
        0x75,
        0x63,
        0x68,
        0x0d,
        0x0a,
        0x6c,
        0x61,
        0x62,
        0x65,
        0x6c,
        0x20,
        0x31,
        0x35,
        0x36,
        0x0d,
        0x0a,
        0x67,
        0x6f,
        0x74,
        0x6f,
        0x20,
        0x31,
        0x35,
        0x36,
        0x0a,
        0x0a,
        0x65,
        0x76,
        0x65,
        0x6e,
        0x74,
        0x20,
        0x35,
        0x35,
        0x35,
        0x0d,
        0x0a,
        0x65,
        0x6e,
        0x65,
        0x6d,
        0x79,
        0x5f,
        0x76,
        0x69,
        0x64,
        0x69,
        0x6d,
        0x20,
        0x30,
        0x0d,
        0x0a,
        0x6c,
        0x61,
        0x62,
        0x65,
        0x6c,
        0x20,
        0x32,
        0x0d,
        0x0a,
        0x67,
        0x6f,
        0x74,
        0x6f,
        0x20,
        0x32,
        0x20
    };

            var dnc = new Dnc
            {
                Name = "Sam",
                dncType = DncType.Enemy,
                RawData = rawData,
                RawDataBackup = new byte[]
    {
        0x03,
        0x02,
        0x00,
        0x00,
        0x23,
        0xae,
        0x0a,
        0x00,
        0x00,
        0x00,
        0x53,
        0x61,
        0x6d,
        0x00,
        0x22,
        0xae,
        0x0a,
        0x00,
        0x00,
        0x00,
        0x1b,
        0x00,
        0x00,
        0x00,
        0x24,
        0xae,
        0xe9,
        0x01,
        0x00,
        0x00,
        0x06,
        0x02,
        0x00,
        0x00,
        0x00,
        0x01,
        0x00,
        0x00,
        0x00,
        0x00,
        0x00,
        0x80,
        0x3f,
        0x00,
        0x00,
        0x16,
        0x44,
        0x00,
        0x00,
        0xa0,
        0x41,
        0x00,
        0x00,
        0xa0,
        0x41,
        0x00,
        0x00,
        0xa0,
        0x41,
        0x00,
        0x00,
        0xa0,
        0x41,
        0x00,
        0x00,
        0x80,
        0x3f,
        0x00,
        0x00,
        0x80,
        0x3f,
        0x00,
        0x00,
        0x80,
        0x3f,
        0x00,
        0x00,
        0x80,
        0x3f,
        0x00,
        0x00,
        0x80,
        0x3f,
        0x00,
        0x00,
        0x80,
        0x3f,
        0x00,
        0x00,
        0x80,
        0x3f,
        0xcb,
        0xcc,
        0x4c,
        0x3f,
        0x00,
        0x00,
        0xa0,
        0x42,
        0x00,
        0x00,
        0x00,
        0x3f,
        0x01,
        0x01,
        0x00,
        0x00,
        0x00,
        0x00,
        0x90,
        0x01,
        0x00,
        0x00,
        0x2f,
        0x2f,
        0x50,
        0x72,
        0x65,
        0x64,
        0x61,
        0x74,
        0x6f,
        0x52,
        0x20,
        0x4d,
        0x6f,
        0x44,
        0x2f,
        0x2f,
        0x0a,
        0x2f,
        0x2f,
        0x42,
        0x79,
        0x20,
        0x53,
        0x6f,
        0x6d,
        0x65,
        0x62,
        0x6f,
        0x64,
        0x59,
        0x2f,
        0x2f,
        0x0a,
        0x2f,
        0x2f,
        0x56,
        0x65,
        0x72,
        0x2e,
        0x32,
        0x2e,
        0x30,
        0x2f,
        0x2f,
        0x0a,
        0x64,
        0x69,
        0x6d,
        0x5f,
        0x66,
        0x6c,
        0x74,
        0x20,
        0x31,
        0x0a,
        0x64,
        0x69,
        0x6d,
        0x5f,
        0x61,
        0x63,
        0x74,
        0x20,
        0x33,
        0x0d,
        0x0a,
        0x64,
        0x69,
        0x6d,
        0x5f,
        0x66,
        0x72,
        0x6d,
        0x20,
        0x32,
        0x0d,
        0x0a,
        0x66,
        0x69,
        0x6e,
        0x64,
        0x61,
        0x63,
        0x74,
        0x6f,
        0x72,
        0x20,
        0x30,
        0x2c,
        0x20,
        0x22,
        0x54,
        0x6f,
        0x6d,
        0x6d,
        0x79,
        0x22,
        0x0a,
        0x66,
        0x69,
        0x6e,
        0x64,
        0x61,
        0x63,
        0x74,
        0x6f,
        0x72,
        0x20,
        0x31,
        0x2c,
        0x20,
        0x22,
        0x22,
        0x0d,
        0x0a,
        0x66,
        0x69,
        0x6e,
        0x64,
        0x61,
        0x63,
        0x74,
        0x6f,
        0x72,
        0x20,
        0x32,
        0x2c,
        0x20,
        0x22,
        0x50,
        0x2d,
        0x53,
        0x63,
        0x61,
        0x72,
        0x22,
        0x0a,
        0x66,
        0x69,
        0x6e,
        0x64,
        0x66,
        0x72,
        0x61,
        0x6d,
        0x65,
        0x20,
        0x30,
        0x2c,
        0x20,
        0x22,
        0x49,
        0x6e,
        0x74,
        0x72,
        0x6f,
        0x50,
        0x6f,
        0x69,
        0x6e,
        0x74,
        0x33,
        0x22,
        0x0d,
        0x0a,
        0x66,
        0x69,
        0x6e,
        0x64,
        0x66,
        0x72,
        0x61,
        0x6d,
        0x65,
        0x20,
        0x31,
        0x2c,
        0x20,
        0x22,
        0x41,
        0x63,
        0x74,
        0x3a,
        0x54,
        0x6f,
        0x6d,
        0x6d,
        0x79,
        0x22,
        0x0d,
        0x0a,
        0x0d,
        0x0a,
        0x65,
        0x6e,
        0x65,
        0x6d,
        0x79,
        0x5f,
        0x76,
        0x69,
        0x64,
        0x69,
        0x6d,
        0x20,
        0x30,
        0x0a,
        0x68,
        0x75,
        0x6d,
        0x61,
        0x6e,
        0x5f,
        0x61,
        0x64,
        0x64,
        0x77,
        0x65,
        0x61,
        0x70,
        0x6f,
        0x6e,
        0x20,
        0x31,
        0x2c,
        0x20,
        0x31,
        0x30,
        0x2c,
        0x20,
        0x35,
        0x30,
        0x2c,
        0x20,
        0x32,
        0x30,
        0x30,
        0x30,
        0x0a,
        0x63,
        0x61,
        0x72,
        0x5f,
        0x75,
        0x6e,
        0x62,
        0x72,
        0x65,
        0x61,
        0x6b,
        0x61,
        0x62,
        0x6c,
        0x65,
        0x20,
        0x32,
        0x2c,
        0x20,
        0x31,
        0x0d,
        0x0a,
        0x0a,
        0x6c,
        0x61,
        0x62,
        0x65,
        0x6c,
        0x20,
        0x31,
        0x0a,
        0x67,
        0x6f,
        0x74,
        0x6f,
        0x20,
        0x31,
        0x0a,
        0x0a,
        0x65,
        0x76,
        0x65,
        0x6e,
        0x74,
        0x20,
        0x33,
        0x35,
        0x30,
        0x0d,
        0x0a,
        0x65,
        0x6e,
        0x65,
        0x6d,
        0x79,
        0x5f,
        0x76,
        0x69,
        0x64,
        0x69,
        0x6d,
        0x20,
        0x31,
        0x0a,
        0x65,
        0x6e,
        0x65,
        0x6d,
        0x79,
        0x5f,
        0x61,
        0x63,
        0x74,
        0x69,
        0x6f,
        0x6e,
        0x5f,
        0x66,
        0x6f,
        0x6c,
        0x6c,
        0x6f,
        0x77,
        0x20,
        0x30,
        0x2c,
        0x20,
        0x32,
        0x2c,
        0x20,
        0x63,
        0x72,
        0x6f,
        0x75,
        0x63,
        0x68,
        0x0d,
        0x0a,
        0x6c,
        0x61,
        0x62,
        0x65,
        0x6c,
        0x20,
        0x31,
        0x35,
        0x36,
        0x0d,
        0x0a,
        0x67,
        0x6f,
        0x74,
        0x6f,
        0x20,
        0x31,
        0x35,
        0x36,
        0x0a,
        0x0a,
        0x65,
        0x76,
        0x65,
        0x6e,
        0x74,
        0x20,
        0x35,
        0x35,
        0x35,
        0x0d,
        0x0a,
        0x65,
        0x6e,
        0x65,
        0x6d,
        0x79,
        0x5f,
        0x76,
        0x69,
        0x64,
        0x69,
        0x6d,
        0x20,
        0x30,
        0x0d,
        0x0a,
        0x6c,
        0x61,
        0x62,
        0x65,
        0x6c,
        0x20,
        0x32,
        0x0d,
        0x0a,
        0x67,
        0x6f,
        0x74,
        0x6f,
        0x20,
        0x32,
        0x20
    },
                objectIDArr = new byte[]
    {
        0x21,
        0xae
    }
            };

            var script = Scene2Parser.GetScriptFromDnc(dnc);
            Scene2Parser.UpdateStringInEnemyDnc(dnc, script);

            Assert.True(dnc.RawData.SequenceEqual(rawData));
        }

        [Fact]
        public void EnemySaveTestWithScriptUpdate()
        {
            // before
            Dnc dnc = new Dnc { dncKind = NodeType.Definition, dncType = DncType.Enemy };
            dnc.RawData = new byte[]
            {
                    0x8f,   0x01,   0x00,   0x00,   0x23,   0xae,   0x0e,   0x00,   0x00,   0x00,   0x61,   0x6e,   0x67,   0x6d,   0x61,   0x6e,   0x31,   0x00,   0x22,   0xae,   0x0a,   0x00,   0x00,   0x00,   0x1b,   0x00,   0x00,   0x00,   0x24,   0xae,   0x54,   0x01,   0x00,   0x00,   0x06,   0x02,   0x00,   0x00,   0x00,   0x0c,   0x00,   0x00,   0x00,   0x00,   0x00,   0x80,   0x3f,   0x00,   0x00,   0xc8,   0x41,   0x00,   0x00,   0xa0,   0x41,   0x00,   0x00,   0xa0,   0x41,   0x00,   0x00,   0xa0,   0x41,   0x00,   0x00,   0xa0,   0x41,   0x00,   0x00,   0x80,   0x3f,   0x00,   0x00,   0x80,   0x3f,   0x00,   0x00,   0x80,   0x3f,   0x00,   0x00,   0x80,   0x3f,   0x00,   0x00,   0x80,   0x3f,   0x00,   0x00,   0x80,   0x3f,   0x00,   0x00,   0x80,   0x3f,   0xcb,   0xcc,   0x4c,   0x3f,   0x00,   0x00,   0xa0,   0x42,   0x00,   0x00,   0x00,   0x3f,   0x01,   0x01,   0x00,   0x00,   0x00,   0x00,   0x18,   0x01,   0x00,   0x00,   0x2f,   0x2f,   0x50,   0x72,   0x65,   0x64,   0x61,   0x74,   0x6f,   0x52,   0x20,   0x4d,   0x6f,   0x44,   0x2f,   0x2f,   0x0a,   0x2f,   0x2f,   0x42,   0x79,   0x20,   0x53,   0x6f,   0x6d,   0x65,   0x62,   0x6f,   0x64,   0x59,   0x2f,   0x2f,   0x0a,   0x2f,   0x2f,   0x56,   0x65,   0x72,   0x2e,   0x32,   0x2e,   0x30,   0x2f,   0x2f,   0x0a,   0x2f,   0x2f,   0x2f,   0x0a,   0x61,   0x63,   0x74,   0x5f,   0x73,   0x65,   0x74,   0x73,   0x74,   0x61,   0x74,   0x65,   0x20,   0x2d,   0x31,   0x2c,   0x69,   0x6e,   0x61,   0x63,   0x74,   0x69,   0x76,   0x65,   0x0a,   0x64,   0x69,   0x6d,   0x5f,   0x66,   0x6c,   0x74,   0x20,   0x31,   0x0a,   0x64,   0x69,   0x6d,   0x5f,   0x61,   0x63,   0x74,   0x20,   0x33,   0x0a,   0x64,   0x69,   0x6d,   0x5f,   0x66,   0x72,   0x6d,   0x20,   0x32,   0x0a,   0x66,   0x69,   0x6e,   0x64,   0x61,   0x63,   0x74,   0x6f,   0x72,   0x20,   0x30,   0x2c,   0x20,   0x22,   0x54,   0x6f,   0x6d,   0x6d,   0x79,   0x22,   0x0a,   0x66,   0x69,   0x6e,   0x64,   0x61,   0x63,   0x74,   0x6f,   0x72,   0x20,   0x31,   0x2c,   0x20,   0x22,   0x22,   0x0a,   0x66,   0x69,   0x6e,   0x64,   0x61,   0x63,   0x74,   0x6f,   0x72,   0x20,   0x32,   0x2c,   0x20,   0x22,   0x61,   0x6e,   0x67,   0x63,   0x61,   0x72,   0x22,   0x0a,   0x66,   0x69,   0x6e,   0x64,   0x66,   0x72,   0x61,   0x6d,   0x65,   0x20,   0x30,   0x2c,   0x20,   0x22,   0x6d,   0x69,   0x73,   0x65,   0x32,   0x5f,   0x70,   0x6f,   0x69,   0x6e,   0x74,   0x22,   0x0a,   0x0a,   0x6c,   0x61,   0x62,   0x65,   0x6c,   0x20,   0x31,   0x0a,   0x67,   0x6f,   0x74,   0x6f,   0x20,   0x31,   0x0a,   0x0a,   0x65,   0x76,   0x65,   0x6e,   0x74,   0x20,   0x36,   0x35,   0x32,   0x0a,   0x65,   0x6e,   0x65,   0x6d,   0x79,   0x5f,   0x6d,   0x6f,   0x76,   0x65,   0x5f,   0x74,   0x6f,   0x5f,   0x66,   0x72,   0x61,   0x6d,   0x65,   0x20,   0x30,   0x2c,   0x20,   0x30,   0x2c,   0x20,   0x72,   0x75,   0x6e,   0x0a,   0x68,   0x75,   0x6d,   0x61,   0x6e,   0x5f,   0x61,   0x63,   0x74,   0x69,   0x76,   0x61,   0x74,   0x65,   0x77,   0x65,   0x61,   0x70,   0x6f,   0x6e,   0x20,   0x31,   0x2c,   0x20,   0x31,   0x34,   0x0a,   0x72,   0x65,   0x74,   0x75,   0x72, 0x6e
            };

            dnc.Name = Scene2Parser.GetNameOfDnc(dnc);

            var script = @"//PredatoR MoD//
//By SomebodY//
//Ver.2.0//
act_setstate - 1,inactive
dim_flt 1
dim_act 3
dim_frm 2
findactor 0, ""Tommy""
findactor 1, """"
findactor 2, ""angcar""
findframe 0, ""mise2_point""

label 1
goto 1

event 652
enemy_move_to_frame 0, 0, run
human_activateweapon 1, 14
return";

            // after
            byte[] expected = new byte[]
            {
                    0x9e,   0x01,   0x00,   0x00,   0x23,   0xae,   0x0e,   0x00,   0x00,   0x00,   0x61,   0x6e,   0x67,   0x6d,   0x61,   0x6e,   0x31,   0x00,   0x22,   0xae,   0x0a,   0x00,   0x00,   0x00,   0x1b,   0x00,   0x00,   0x00,   0x24,   0xae,   0x80,   0x01,   0x00,   0x00,   0x06,   0x02,   0x00,   0x00,   0x00,   0x0c,   0x00,   0x00,   0x00,   0x00,   0x00,   0x80,   0x3f,   0x00,   0x00,   0xc8,   0x41,   0x00,   0x00,   0xa0,   0x41,   0x00,   0x00,   0xa0,   0x41,   0x00,   0x00,   0xa0,   0x41,   0x00,   0x00,   0xa0,   0x41,   0x00,   0x00,   0x80,   0x3f,   0x00,   0x00,   0x80,   0x3f,   0x00,   0x00,   0x80,   0x3f,   0x00,   0x00,   0x80,   0x3f,   0x00,   0x00,   0x80,   0x3f,   0x00,   0x00,   0x80,   0x3f,   0x00,   0x00,   0x80,   0x3f,   0xcb,   0xcc,   0x4c,   0x3f,   0x00,   0x00,   0xa0,   0x42,   0x00,   0x00,   0x00,   0x3f,   0x01,   0x01,   0x00,   0x00,   0x00,   0x00,   0x27,   0x01,   0x00,   0x00,  0x2f,   0x2f,   0x50,   0x72,   0x65,   0x64,   0x61,   0x74,   0x6f,   0x52,   0x20,   0x4d,   0x6f,   0x44,   0x2f,   0x2f,   0x0d,   0x0a,   0x2f,   0x2f,   0x42,   0x79,   0x20,   0x53,   0x6f,   0x6d,   0x65,   0x62,   0x6f,   0x64,   0x59,   0x2f,   0x2f,   0x0d,   0x0a,   0x2f,   0x2f,   0x56,   0x65,   0x72,   0x2e,   0x32,   0x2e,   0x30,   0x2f,   0x2f,   0x0d,   0x0a,   0x61,   0x63,   0x74,   0x5f,   0x73,   0x65,   0x74,   0x73,   0x74,   0x61,   0x74,   0x65,   0x20,   0x2d,   0x20,   0x31,   0x2c,   0x69,   0x6e,   0x61,   0x63,   0x74,   0x69,   0x76,   0x65,   0x0d,   0x0a,   0x64,   0x69,   0x6d,   0x5f,   0x66,   0x6c,   0x74,   0x20,   0x31,   0x0d,   0x0a,   0x64,   0x69,   0x6d,   0x5f,   0x61,   0x63,   0x74,   0x20,   0x33,   0x0d,   0x0a,   0x64,   0x69,   0x6d,   0x5f,   0x66,   0x72,   0x6d,   0x20,   0x32,   0x0d,   0x0a,   0x66,   0x69,   0x6e,   0x64,   0x61,   0x63,   0x74,   0x6f,   0x72,   0x20,   0x30,   0x2c,   0x20,   0x22,   0x54,   0x6f,   0x6d,   0x6d,   0x79,   0x22,   0x0d,   0x0a,   0x66,   0x69,   0x6e,   0x64,   0x61,   0x63,   0x74,   0x6f,   0x72,   0x20,   0x31,   0x2c,   0x20,   0x22,   0x22,   0x0d,   0x0a,   0x66,   0x69,   0x6e,   0x64,   0x61,   0x63,   0x74,   0x6f,   0x72,   0x20,   0x32,   0x2c,   0x20,   0x22,   0x61,   0x6e,   0x67,   0x63,   0x61,   0x72,   0x22,   0x0d,   0x0a,   0x66,   0x69,   0x6e,   0x64,   0x66,   0x72,   0x61,   0x6d,   0x65,   0x20,   0x30,   0x2c,   0x20,   0x22,   0x6d,   0x69,   0x73,   0x65,   0x32,   0x5f,   0x70,   0x6f,   0x69,   0x6e,   0x74,   0x22,   0x0d,   0x0a,   0x0d,   0x0a,   0x6c,   0x61,   0x62,   0x65,   0x6c,   0x20,   0x31,   0x0d,   0x0a,   0x67,   0x6f,   0x74,   0x6f,   0x20,   0x31,   0x0d,   0x0a,   0x0d,   0x0a,   0x65,   0x76,   0x65,   0x6e,   0x74,   0x20,   0x36,   0x35,   0x32,   0x0d,   0x0a,   0x65,   0x6e,   0x65,   0x6d,   0x79,   0x5f,   0x6d,   0x6f,   0x76,   0x65,   0x5f,   0x74,   0x6f,   0x5f,   0x66,   0x72,   0x61,   0x6d,   0x65,   0x20,   0x30,   0x2c,   0x20,   0x30,   0x2c,   0x20,   0x72,   0x75,   0x6e,   0x0d,   0x0a,   0x68,   0x75,   0x6d,   0x61,   0x6e,   0x5f,   0x61,   0x63,   0x74,   0x69,   0x76,   0x61,   0x74,   0x65,   0x77,   0x65,   0x61,   0x70,   0x6f,   0x6e,   0x20,   0x31,   0x2c,   0x20,   0x31,   0x34,   0x0d,   0x0a,   0x72,   0x65,   0x74,   0x75,   0x72,   0x6e
            };

            Scene2Parser.UpdateStringInEnemyDnc(dnc, script);

            Dnc dummy = new Dnc();
            dummy.RawData = expected;
            int diff = DncMethods.RawDataEqualGetDiffOffset(dnc, dummy);
            Assert.True(dnc.RawData.SequenceEqual(expected));

        }
    }
}
